<mvc:View
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:commons="sap.suite.ui.commons"
    xmlns="sap.m"
    controllerName="com.kyyte.icecream.controller.ProcessFlow"
    xmlns:mc="sap.suite.ui.microchart"
    xmlns:plugins="sap.m.plugins"
>
    <Page
        title="{i18n>processFlowTitle}"
        showNavButton="true"
        navButtonPress="onNavButtonPressed"
        backgroundDesign="Solid"
    >
        <content>
            <!-- <m:ObjectHeader
				responsive="true"
				title="{
					parts: [
						'i18n>processFlowChartsTitle',
						'business>/year'
					],
					formatter: 'jQuery.sap.formatMessage'
				}">
				<m:headerContainer>
					<m:HeaderContainer
						scrollStep="200"
						scrollTime="500"
						showDividers="true"
						class="sapUiSmallMargin">
						<m:FlexBox
							width="12rem"
							height="9rem"
							alignItems="Center"
							justifyContent="Center"
							direction="Column"
							renderType="Bare">
							<m:Title
								text="{i18n>processFlowChartsShareOwnProduction}"
								class="sapUiSmallMargin" />
							<m:FlexBox width="5rem" height="5rem" renderType="Bare">
								<mc:RadialMicroChart percentage="{business>/shareOwnProduction}" />
							</m:FlexBox>
						</m:FlexBox>
						<m:FlexBox
							width="16rem"
							height="9rem"
							alignItems="Center"
							justifyContent="Center"
							direction="Column"
							renderType="Bare">
							<m:Title
								text="{
									parts: [
										'i18n>processFlowChartsDeliveryTimeComparison',
										'suppliers>/timeMeasure'
									],
									formatter: 'jQuery.sap.formatMessage'
								}"
								class="sapUiSmallMargin" />
							<m:FlexBox width="16rem" height="5rem" renderType="Bare">
								<mc:ComparisonMicroChart
									isResponsive="true"
									press="press"
									data="{suppliers>/Suppliers}">
									<mc:data>
										<mc:ComparisonMicroChartData
											title="{suppliers>id}"
											value="{suppliers>deliveryTime}"
											displayValue="{suppliers>deliveryTime}"
											color="{suppliers>deliveryTimeSemantics}" />
									</mc:data>
								</mc:ComparisonMicroChart>
							</m:FlexBox>
						</m:FlexBox>
						<m:FlexBox
							width="12rem"
							height="9rem"
							alignItems="Center"
							justifyContent="Center"
							direction="Column"
							renderType="Bare">
							<m:Title
								text="{
									parts: [
										'i18n>processFlowChartsProductionTime',
										'business>/timeMeasure'
										],
									formatter: 'jQuery.sap.formatMessage'
								}"
								class="sapUiSmallMargin" />
							<m:FlexBox width="12rem" height="5rem" renderType="Bare">
								<mc:DeltaMicroChart
									isResponsive="true"
									color="{business>/productionTimeComparisonCriticality}"
									value1="{business>/expectedProductionTime}"
									value2="{business>/currentProductionTime}"
									title1="{i18n>processFlowChartsExpected}"
									title2="{i18n>processFlowChartsCurrent}"
									displayValue1="{business>/expectedProductionTime}"
									displayValue2="{business>/currentProductionTime}"
									deltaDisplayValue="{
										parts: [
											'business>/expectedProductionTime',
											'business>/currentProductionTime'
										],
										formatter: '.getValuesDelta'
									}" />
							</m:FlexBox>
						</m:FlexBox>
						<m:FlexBox
							width="12rem"
							height="9rem"
							alignItems="Center"
							justifyContent="Center"
							direction="Column"
							renderType="Bare">
							<m:Title
								text="{
									parts: [
										'i18n>processFlowChartsFillLevel',
										'business>/fillLevel/measure'
									],
									formatter: 'jQuery.sap.formatMessage'
								}"
								class="sapUiSmallMargin" />
							<m:FlexBox width="12rem" height="5rem" renderType="Bare">
								<mc:LineMicroChart
									size="Responsive"
									threshold="{business>/fillLevel/threshold}"
									leftTopLabel="{business>/fillLevel/valueBegin}"
									leftBottomLabel="{business>/fillLevel/timeBegin}"
									rightTopLabel="{business>/fillLevel/valueEnd}"
									rightBottomLabel="{business>/fillLevel/timeEnd}"
									color="{business>/fillLevel/color}"
									showPoints="true"
									points="{
										path: 'business>/fillLevel/timeSeries',
										templateShareable: true
									}">
									<mc:LineMicroChartPoint
										x="{business>time}"
										y="{business>level}" />
								</mc:LineMicroChart>
							</m:FlexBox>
						</m:FlexBox>
					</m:HeaderContainer>
				</m:headerContainer>
			</m:ObjectHeader>
			<m:Panel headerText="{i18n>processFlowProcessTitle}">
				<ProcessFlow
					id="processflow1"
					scrollable="false"
					nodes="{process>/Nodes}"
					lanes="{process>/Lanes}"
					nodePress="onNodePressed">
					<nodes>
						<ProcessFlowNode
							laneId="{process>lane}"
							nodeId="{process>id}"
							title="{process>title}"
							titleAbbreviation="{process>titleAbbreviation}"
							children="{process>children}"
							state="{process>state}"
							stateText="{process>stateText}"
							texts="{process>texts}"
							focused="{process>focused}" />
					</nodes>
					<lanes>
						<ProcessFlowLaneHeader
							laneId="{process>id}"
							iconSrc="{process>icon}"
							text="{process>label}"
							position="{process>position}" />
					</lanes>
				</ProcessFlow>
			</m:Panel> -->

            <Table
                id="idProductsTable"
                fixedLayout="Strict"
                autoPopinMode="true"
                contextualWidth="Auto"
                items="{/ProcessFlows}"
            >
                <headerToolbar>
                    <OverflowToolbar>
                        <Title
                            text="Process Flows"
                            level="H2"
                        />
                        <ToolbarSpacer />
                        <Button
                            tooltip="Sort"
                            icon="sap-icon://sort"
                            press="handleSortButtonPressed"
                        />
                        <Button
                            tooltip="Filter"
                            icon="sap-icon://filter"
                            press="handleFilterButtonPressed"
                        />
                        <Button
                            tooltip="Group"
                            icon="sap-icon://group-2"
                            press="handleGroupButtonPressed"
                        />
                        <ToggleButton
                            icon="sap-icon://menu"
                            tooltip="Enable Custom Context Menu"
                            press="onToggleContextMenu"
                        />
                    </OverflowToolbar>
                </headerToolbar>
                <dependents>
                    <plugins:ColumnResizer />
                </dependents>
                <infoToolbar>
                    <OverflowToolbar
                        id="vsdFilterBar"
                        visible="false"
                    >
                        <Text id="vsdFilterLabel" />
                    </OverflowToolbar>
                </infoToolbar>
                <columns>
                    <Column
                        id="product"
                        width="20em"
                        headerMenu="columnHeaderMenu"
                    >
                        <Text text="Process Flow" />
                    </Column>
                    <Column
                        width="150px"
                        minScreenWidth="Tablet"
                        demandPopin="true"
                    >
                        <Text text="Abbreviation" />
                    </Column>
                    <Column
                        width="10rem"
                        minScreenWidth="Tablet"
                        demandPopin="true"
                        hAlign="Center"
                    >
                        <Text text="Status" />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem vAlign="Middle">
                        <cells>
                            <ObjectIdentifier
                                title="{Title}"
                                text="{ID}"
                            />
                            <Text text="{TitleAbbreviation}" />

                            <ObjectStatus
                                text="{State}"
                                icon="sap-icon://sys-enter-2"
                                state="{
									path: 'State',
									formatter: '.getState'
								}"
                            />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>
</mvc:View>
